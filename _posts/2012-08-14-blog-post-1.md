---
title: 'QEA2 心电检测系统'
date: 2025-06-14
permalink: /posts/2025/06/blog-post-1/
tags:
  - cool posts
  - category1
  - category2
---



此系统旨在实时监测和分析心电信号（ECG），分为上位机与下位机两大部分。

## 上位机

### 功能概述

上位机实现了从串口接收原始ECG数据，并通过多线程处理进行实时读取、信号滤波、R波检测、心率计算以及图形化显示。主要功能包括：
- **串口读取**：采用基于包头和长度的数据帧解析机制，确保数据传输的稳定性和可靠性。
- **数据处理**：使用IIR高通滤波去除基线漂移，FIR低通滤波消除高频噪声，并简化Pan-Tompkins算法用于R波检测。
- **GUI显示**：提供直观的用户界面，实时显示处理后的ECG信号及其频域图像，并显示R波峰值信息。

### 工作流程

上位机的工作流程依赖于三个核心线程：
- **串口读取线程**：负责监听指定串口并解析接收到的数据。
- **数据处理线程**：对接收到的数据进行滤波处理、R波检测和心率计算。
- **GUI线程**：负责初始化Tkinter窗口和Matplotlib图表，实时更新显示内容。

### 亮点
- **多线程架构**：有效解决了"数据I/O阻塞UI"的问题，提高了系统的实时性。
- **精确的心率计算**：利用时间戳精确计算RR间期，减少了因采样不均匀带来的误差。

## 下位机

### 硬件描述

下位机系统以STM32F407为核心，集成了ADS1296生物电信号采集芯片、LCD显示屏、蜂鸣器等组件。主要硬件特性包括：
- **ADS1296**：用于心电信号的高精度采集。
- **LCD显示屏**：实时显示心电信号波形。
- **蜂鸣器**：提供心跳提示音。

### 信号处理

下位机的主要任务是对采集到的心电信号进行预处理和分析：
- **滤波处理**：使用IIR高通滤波去除基线漂移，FIR低通滤波消除高频噪声。
- **心跳检测**：采用Pan-Tompkins算法进行R波检测，并利用DWT计时器实现高精度的心率测量。
- **频谱分析**：通过FFT对心电信号进行频谱分析，帮助识别噪声频段和心脏自主节律相关的成分。

### 测试结果

在最终测试中，下位机能够准确显示处理前后的时域和频域图，以及估算得到的心率，整体信号处理方案运行稳定可靠，符合预期效果。

### 总结

整个项目展示了学生在ECG信号处理算法及其实现方面的深入理解，特别是在高并发、高实时性的多线程系统设计方面取得了显著成就。同时，也体现了跨平台协作的重要性，特别是清晰接口定义和协议设计在系统集成中的作用。


您可以在[这里](/files/paper1.pdf)下载相关的PDF文件.



PDF完整内容（竖直平铺显示）：

<div id="pdf-container" data-pdf-url="/files/心电测试报告-贺禄文-20234232.pdf" style="width:100%;">
  <!-- PDF页面将在这里竖直平铺显示 -->
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
<script src="/assets/js/pdf-viewer.js"></script>

